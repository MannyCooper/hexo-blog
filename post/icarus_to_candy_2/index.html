<!DOCTYPE html>
<html lang="zh-CN">
    <head>
    <meta charset="utf-8">

    

    <!-- 渲染优化 -->
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="HandheldFriendly" content="True" >
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!--icon-->

    
        <link rel="shortcut icon" href="/img/favicon-32x32.png">
    
    
    
    
    


    <!-- meta -->


<title>基于腾讯云，给你的 Icarus 博客配上 Twikoo 评论系统 | 安子璠的个人主页</title>


    <meta name="keywords" content="Hexo, 博客主题, 前端, 评论">




    <!-- OpenGraph -->
 
    <meta name="description" content="舒服地畅所欲言很重要">
<meta property="og:type" content="article">
<meta property="og:title" content="基于腾讯云，给你的 Icarus 博客配上 Twikoo 评论系统">
<meta property="og:url" content="https://anzifan.com/post/icarus_to_candy_2/index.html">
<meta property="og:site_name" content="安子璠的个人主页">
<meta property="og:description" content="舒服地畅所欲言很重要">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-12-29T21:02:43.102Z">
<meta property="article:modified_time" content="2021-02-10T22:03:52.662Z">
<meta property="article:author" content="安子璠">
<meta property="article:tag" content="Hexo">
<meta property="article:tag" content="博客主题">
<meta property="article:tag" content="前端">
<meta property="article:tag" content="评论">
<meta name="twitter:card" content="summary_large_image">


    
<link rel="stylesheet" href="/css/style/main.css">
 


    
<link rel="stylesheet" href="/css/style/dark.css">

    
<script src="/js/darkmode.js"></script>



    
    
    
        <link rel="stylesheet" id="hl-default-theme" href="https://cdn.jsdelivr.net/npm/highlight.js@10.1.2/styles/atom-one-light.min.css" media="none" onload="if(getComputedStyle(document.documentElement).getPropertyValue('--color-mode').indexOf('dark')===-1)this.media='all'">
        
            <link rel="stylesheet" id="hl-dark-theme" href="https://cdn.jsdelivr.net/npm/highlight.js@10.1.2/styles/atom-one-dark.min.css" media="none" onload="if(getComputedStyle(document.documentElement).getPropertyValue('--color-mode').indexOf('dark')!==-1)this.media='all'">
        
    

    

     
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
 

    <!-- custom head -->

    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="安子璠的个人主页" type="application/atom+xml">
</head>

    <body>
        <div id="app">
            <div class="header-wrapper">
<header class="header">
    <div class="header__left">
        <a href="/" class="link-button">
            <span class="logo__text">异次元de机智君💯</span>
        </a>
    </div>
    <div class="header__right">
        
            <div class="navbar__menus">
                
                    <a href="/tags/" class="navbar-menu link-button "><svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="m12.991 24.943c-2.0332 6e-4 -4.0325-0.5208-5.8064-1.5143l-4.2694 0.1708c-0.13194 4e-4 -0.26238-0.028-0.3823-0.083-0.11991-0.0551-0.22643-0.1355-0.3122-0.2358-0.07501-0.0974-0.12809-0.2099-0.1556-0.3298s-0.0288-0.2443-0.00379-0.3647l0.80835-3.1537c-1.4278-2.2486-2.067-4.9083-1.8167-7.5602 0.25029-2.6518 1.3758-5.145 3.1991-7.0868 1.8234-1.9418 4.2409-3.2216 6.8719-3.638 2.6308-0.41641 5.3255 0.05436 7.6594 1.3381 2.3338 1.2838 4.1743 3.3075 5.2312 5.7525 1.057 2.4449 1.2705 5.172 0.6069 7.7517-0.6637 2.5796-2.1668 4.8651-4.2725 6.4964-2.1056 1.6313-4.6942 2.5156-7.3579 2.5137v-0.0569zm-5.5901-3.222c0.15176-0.0012 0.3011 0.0381 0.43263 0.1138 1.9528 1.1274 4.223 1.5793 6.4586 1.2854 2.2357-0.2938 4.312-1.3169 5.9071-2.9106 1.5951-1.5938 2.62-3.6692 2.9158-5.9046 0.2958-2.2353-0.1541-4.5059-1.2798-6.4596-1.1257-1.9538-2.8645-3.4816-4.9468-4.3468-2.0822-0.86518-4.3918-1.0194-6.5706-0.4386-2.1788 0.58074-4.1052 1.864-5.4806 3.6508s-2.123 3.9774-2.127 6.2323c-0.00962 2.0653 0.61424 4.0839 1.7875 5.7837 0.06754 0.103 0.11346 0.2187 0.13499 0.3401 0.02153 0.1213 0.01821 0.2457-0.00975 0.3657l-0.62619 2.4137 3.4156-0.1252h-0.01138z" fill="#FF375F" stroke="#FF375F" stroke-width=".5"/><path d="m8.8519 17.777c-0.09331 0.016-0.18873 0.016-0.28205 0-0.10886-0.0381-0.20876-0.0975-0.2937-0.1747-0.08495-0.0771-0.15318-0.1703-0.2006-0.274s-0.07305-0.2158-0.07535-0.3295 0.01877-0.2267 0.06196-0.3322l2.9898-8.106c0.0387-0.10714 0.0991-0.20547 0.1774-0.28907 0.0784-0.0836 0.1731-0.15076 0.2785-0.19743 0.1053-0.04667 0.2192-0.0719 0.3348-0.07416 0.1155-0.00227 0.2303 0.01848 0.3375 0.06098 0.1098 0.03654 0.2107 0.09521 0.2963 0.17226 0.0855 0.07705 0.1538 0.17079 0.2005 0.27526 0.0467 0.10446 0.0708 0.21736 0.0707 0.33149 0 0.11413-0.0243 0.22699-0.0711 0.3314l-2.9898 8.1059c-0.07091 0.1571-0.18885 0.2891-0.33804 0.3784s-0.32253 0.1316-0.49683 0.1213zm4.2984 0.211c-0.0971 0.0157-0.1962 0.0157-0.2933 0-0.1098-0.0368-0.2108-0.0954-0.2967-0.1723-0.0858-0.0768-0.1547-0.1702-0.2023-0.2743-0.0476-0.1042-0.0729-0.2168-0.0744-0.331s0.0208-0.2275 0.0657-0.3328l3.001-8.0949c0.0355-0.10574 0.0921-0.20341 0.1666-0.28723s0.1653-0.15209 0.267-0.20077c0.1018-0.04868 0.2124-0.07678 0.3254-0.08265 0.1129-0.00587 0.226 0.01062 0.3324 0.0485 0.1063 0.03787 0.2039 0.09636 0.287 0.172 0.083 0.07564 0.1497 0.1669 0.1963 0.26838s0.072 0.21112 0.0747 0.32243c0.0028 0.11132-0.0171 0.22205-0.0586 0.32564l-3.001 8.106c-0.0616 0.157-0.17 0.2919-0.3109 0.387-0.141 0.0952-0.3079 0.1461-0.4789 0.146z" fill="#FF375F" stroke="#FF375F" stroke-width=".5"/><path d="m17.172 11.719h-8.747c-0.18725-0.0403-0.35559-0.1478-0.47651-0.3045s-0.18697-0.3528-0.18697-0.5552c0-0.2023 0.06605-0.3984 0.18697-0.5551s0.28926-0.2642 0.47651-0.3045h8.747c0.2197 0 0.4304 0.0924 0.5857 0.2569s0.2426 0.3876 0.2426 0.6203c0 0.2326-0.0873 0.4558-0.2426 0.6203s-0.366 0.2569-0.5857 0.2569v-0.0351zm-0.5743 4.2807h-8.7691c-0.21968 0-0.43036-0.0924-0.5857-0.2569s-0.24261-0.3876-0.24261-0.6203c0-0.2326 0.08727-0.4558 0.24261-0.6203s0.36602-0.2569 0.5857-0.2569h8.7691c0.2197 0 0.4304 0.0924 0.5857 0.2569s0.2426 0.3877 0.2426 0.6203c0 0.2327-0.0873 0.4558-0.2426 0.6203s-0.366 0.2569-0.5857 0.2569z" fill="#FF375F" stroke="#FF375F" stroke-width=".5"/></svg></a>
                
                    <a href="/archives/" class="navbar-menu link-button "><svg viewBox="0 0 20 19" xmlns="http://www.w3.org/2000/svg"><path d="m3.25 5.5609h13.5c0.3891 0 0.7031-0.31406 0.7031-0.70312 0-0.38907-0.314-0.70313-0.7031-0.70313h-13.5c-0.38906 0-0.70312 0.31406-0.70312 0.70313 0 0.38672 0.3164 0.70312 0.70312 0.70312zm1.5492-3.3797h10.402c0.389 0 0.7031-0.31406 0.7031-0.70312s-0.3141-0.70313-0.7031-0.70313h-10.402c-0.38906 0-0.70313 0.31407-0.70313 0.70313s0.31407 0.70312 0.70313 0.70312zm7.957 10.207h-5.5124c-0.38906 0-0.70313 0.314-0.70313 0.7031s0.31407 0.7031 0.70313 0.7031h5.5124c0.3891 0 0.7032-0.314 0.7032-0.7031s-0.3141-0.7031-0.7032-0.7031z" fill="#FF9F0A" stroke="#FF9F0A" stroke-width=".5"/><path d="m17.929 7.4664h-15.858c-0.77344 0-1.4062 0.63281-1.4062 1.4062v8.4376c0 0.7734 0.63281 1.4062 1.4062 1.4062h15.858c0.7734 0 1.4063-0.6328 1.4063-1.4062v-8.4376c0-0.77344-0.6329-1.4062-1.4063-1.4062zm-0.0023 9.8391-0.0024 0.0023h-15.848l-0.00235-0.0023v-8.4305l0.00235-0.00234h15.848l0.0024 0.00234v8.4305z" fill="#FF9F0A" stroke="#FF9F0A" stroke-width=".5"/></svg></a>
                
                    <a href="/friends/" class="navbar-menu link-button "><svg viewBox="0 0 29 26" xmlns="http://www.w3.org/2000/svg"><path d="m23.724 16.024c-0.2141 0-0.4282-0.0823-0.5929-0.247-0.0783-0.0777-0.1404-0.17-0.1828-0.2718-0.0424-0.1017-0.0642-0.2109-0.0642-0.3211 0-0.1103 0.0218-0.2194 0.0642-0.3212s0.1045-0.1941 0.1828-0.2718l2.9975-2.9975c0.6753-0.6752 0.1483-1.4987-0.4282-2.0752l-6.1762-6.1762c-0.4941-0.4941-0.8399-0.62586-1.0376-0.6588-0.1482-0.01647-0.3623-0.01647-0.6588 0.27999l-5.9785 5.9786c0.8729 0.55998 1.8611 0.62586 2.4869 0.08235 1.0706-0.93878 2.6023-2.6022 2.6187-2.6187 0.3129-0.34586 0.84-0.36234 1.1859-0.04941 0.3458 0.31293 0.3623 0.83997 0.0494 1.1858-0.0659 0.06588-1.6141 1.7458-2.7505 2.7505-1.4823 1.3011-3.821 0.9882-5.4515-0.72467-0.31293-0.3294-0.31293-0.85644 0.01643-1.1694l6.6209-6.6209c1.1529-1.1529 2.6846-1.0211 4.0846 0.37881l6.1762 6.1762c1.4987 1.4988 1.6634 3.2116 0.4282 4.4469l-2.9975 2.9975c-0.1647 0.1647-0.3789 0.247-0.593 0.247z" fill="#0A84FF" stroke="#0A84FF" stroke-width=".5"/><path d="m14.583 25c-0.1153 0-0.2471 0-0.3624-0.0165-0.7246-0.0988-1.4164-0.4446-1.9599-0.9882l-6.7032-6.7197c-1.12-1.1199-1.647-2.0093-2.1246-2.7834-0.27999-0.4611-0.54351-0.9058-0.90585-1.367-0.09881-0.1317-0.2141-0.2635-0.32939-0.3952-0.69174-0.84-1.12-1.3835-1.1529-1.9435 0-0.0329 0-0.0659-0.01647-0.0988-0.049413-0.4941-0.1647-1.5317 1.0211-2.7175l5.3527-5.3527c1.2023-1.2023 2.6187-0.51057 3.5575-0.03294l0.1482 0.06588c0.1483 0.06588 0.313 0.14823 0.4612 0.23058 0.9388 0.46115 2.1246 1.0211 3.1457 1.9105 0.3459 0.29646 0.3953 0.83996 0.0824 1.1858-0.2965 0.34587-0.84 0.39528-1.1858 0.08235-0.8565-0.74114-1.927-1.2517-2.7835-1.6635-0.1646-0.08235-0.3293-0.16469-0.494-0.23057l-0.1483-0.08235c-1.054-0.52704-1.334-0.57645-1.6305-0.27999l-5.3198 5.3527c-0.62586 0.62585-0.57645 0.9882-0.54351 1.3505 0 0.033 0 0.0494 0.01647 0.0824 0.08235 0.2141 0.54351 0.7576 0.79056 1.054 0.11529 0.1483 0.24705 0.2965 0.34586 0.4283 0.44469 0.5599 0.74115 1.054 1.0376 1.5481 0.46115 0.7741 0.88937 1.4988 1.8611 2.4705l6.7033 6.7032c0.2799 0.28 0.6423 0.4612 0.9882 0.5106 0.247 0.033 0.4611-0.0165 0.5764-0.1153 0.3294-0.3294 2.0093-1.8117 4.348-3.8704 1.3176-1.1529 2.7999-2.454 2.9481-2.6187 0.0165-0.0165 0.873-1.12 0.0824-1.9105l-6.1927-6.1927c-0.3294-0.3294-0.3294-0.85643 0-1.1858s0.8565-0.3294 1.1859 0l6.1926 6.1927c0.6918 0.6917 0.9553 1.614 0.7576 2.5857-0.1482 0.7247-0.527 1.3835-0.8399 1.6964-0.1812 0.1812-1.2188 1.087-3.0305 2.6846-1.7623 1.5482-3.9527 3.4752-4.2657 3.7881-0.3952 0.4117-0.9717 0.6423-1.614 0.6423z" fill="#0A84FF" stroke="#0A84FF" stroke-width=".5"/><path d="m21.566 18.643c-0.2141 0-0.4282-0.0823-0.5929-0.247l-3.014-3.014c-0.3294-0.3294-0.3294-0.8564 0-1.1858s0.8564-0.3294 1.1858 0l3.014 3.0139c0.0783 0.0777 0.1404 0.17 0.1828 0.2718s0.0643 0.2109 0.0643 0.3212c0 0.1102-0.0219 0.2194-0.0643 0.3211-0.0424 0.1018-0.1045 0.1942-0.1828 0.2718-0.1482 0.1647-0.3623 0.247-0.5929 0.247zm-2.1081 2.1246c-0.2141 0-0.4283-0.0823-0.593-0.247l-3.0139-3.014c-0.3294-0.3294-0.3294-0.8564 0-1.1858s0.8564-0.3294 1.1858 0l3.014 3.014c0.0783 0.0776 0.1404 0.1699 0.1828 0.2717s0.0642 0.2109 0.0642 0.3212c0 0.1102-0.0218 0.2194-0.0642 0.3211-0.0424 0.1018-0.1045 0.1942-0.1828 0.2718-0.1647 0.1647-0.3788 0.247-0.5929 0.247zm-2.2894 2.2894c-0.2141 0-0.4282-0.0824-0.5929-0.2471l-3.014-3.014c-0.3294-0.3294-0.3294-0.8564 0-1.1858s0.8565-0.3294 1.1859 0l3.014 3.014c0.0782 0.0776 0.1404 0.17 0.1828 0.2717 0.0424 0.1018 0.0642 0.2109 0.0642 0.3212 0 0.1102-0.0218 0.2194-0.0642 0.3212-0.0424 0.1017-0.1046 0.1941-0.1828 0.2717-0.1647 0.1647-0.3788 0.2471-0.593 0.2471z" fill="#0A84FF" stroke="#0A84FF" stroke-width=".5"/></svg></a>
                
                    <a href="/about/" class="navbar-menu link-button "><svg width="26" height="23" viewBox="0 0 26 23" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18.6853 21.7135C18.4357 21.2996 18.5428 20.7631 18.9347 20.4805C21.7969 18.4177 23.3817 15.0547 23.097 11.4371C22.7227 6.67672 18.9394 2.75422 14.1954 2.20789C8.07773 1.50336 2.87016 6.2893 2.87016 12.2687C2.87016 14.1791 3.39305 16.0084 4.38914 17.6084C4.64367 18.0174 4.53773 18.5527 4.15125 18.8403C3.7125 19.1668 3.08414 19.0505 2.79539 18.586C1.54031 16.5676 0.921093 14.2419 1.00805 11.821C1.21781 5.98719 5.71125 1.06297 11.5064 0.359611C18.7875 -0.524218 25.0001 5.16031 25.0001 12.2687C25.0001 16.1736 23.1607 19.7401 20.032 21.9948C19.59 22.3133 18.9668 22.1802 18.6853 21.7135Z" fill="#FF453A" stroke="#FF453A" stroke-width="0.5"/><path d="M8.91445 11.4383C8.38406 11.4383 7.95422 11.0084 7.95422 10.478V9.48968C7.95422 8.95929 8.38406 8.52945 8.91445 8.52945C9.44484 8.52945 9.87468 8.95929 9.87468 9.48968V10.478C9.87468 11.0084 9.44461 11.4383 8.91445 11.4383ZM12.7177 11.4383C12.1873 11.4383 11.7574 11.0084 11.7574 10.478V9.48968C11.7574 8.95929 12.1873 8.52945 12.7177 8.52945C13.248 8.52945 13.6779 8.95929 13.6779 9.48968V10.478C13.6781 11.0084 13.248 11.4383 12.7177 11.4383ZM10.7639 15.8349C10.2019 15.8349 9.46312 15.5506 8.86664 15.2314C8.39156 14.9771 8.29711 14.3373 8.6782 13.9562C8.92945 13.7049 9.31593 13.647 9.62718 13.8184C9.98343 14.0143 10.4555 14.232 10.7932 14.232C11.2083 14.232 11.6067 14.1226 11.9555 13.9175C12.2639 13.7361 12.657 13.7968 12.9098 14.0497L12.9513 14.0912C13.3139 14.4537 13.257 15.0737 12.8166 15.3366C12.2112 15.6983 11.4877 15.8349 10.7639 15.8349Z" fill="#FF453A" stroke="#FF453A" stroke-width="0.5"/></svg></a>
                
            </div>
        
        
        

        
        
    <a href="javaScript:void(0);" id="btn-toggle-dark">

        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12 22.08C17.567 22.08 22.08 17.567 22.08 12C22.08 6.43297 17.567 1.92 12 1.92C6.43297 1.92 1.92 6.43297 1.92 12C1.92 17.567 6.43297 22.08 12 22.08ZM12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24Z" fill="currentColor"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M22.08 12C22.08 17.567 17.567 22.08 12 22.08V16.56C14.5184 16.56 16.56 14.5184 16.56 12C16.56 9.48158 14.5184 7.44 12 7.44V1.92C17.567 1.92 22.08 6.43297 22.08 12Z" fill="currentColor"/>
            <path d="M12 16.56C9.48158 16.56 7.44 14.5184 7.44 12C7.44 9.48158 9.48158 7.44 12 7.44V16.56Z" fill="currentColor"/>
            </svg>
          
    </a>


        

        
            <a class="dropdown-icon link-button" id="btn-dropdown" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width='24' height='24' fill="none" stroke="currentColor" stroke-width="0.7" stroke-linecap="round" stroke-linejoin="round"><path fill="currentColor" d="M3.314,4.8h13.372c0.41,0,0.743-0.333,0.743-0.743c0-0.41-0.333-0.743-0.743-0.743H3.314c-0.41,0-0.743,0.333-0.743,0.743C2.571,4.467,2.904,4.8,3.314,4.8z M16.686,15.2H3.314c-0.41,0-0.743,0.333-0.743,0.743s0.333,0.743,0.743,0.743h13.372c0.41,0,0.743-0.333,0.743-0.743S17.096,15.2,16.686,15.2z M16.686,9.257H3.314c-0.41,0-0.743,0.333-0.743,0.743s0.333,0.743,0.743,0.743h13.372c0.41,0,0.743-0.333,0.743-0.743S17.096,9.257,16.686,9.257z"></path></svg></a>
            <div class="dropdown-menus" id="dropdown-menus">
                
                    <a href="/tags/" class="dropdown-menu link-button"><svg viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="m12.991 24.943c-2.0332 6e-4 -4.0325-0.5208-5.8064-1.5143l-4.2694 0.1708c-0.13194 4e-4 -0.26238-0.028-0.3823-0.083-0.11991-0.0551-0.22643-0.1355-0.3122-0.2358-0.07501-0.0974-0.12809-0.2099-0.1556-0.3298s-0.0288-0.2443-0.00379-0.3647l0.80835-3.1537c-1.4278-2.2486-2.067-4.9083-1.8167-7.5602 0.25029-2.6518 1.3758-5.145 3.1991-7.0868 1.8234-1.9418 4.2409-3.2216 6.8719-3.638 2.6308-0.41641 5.3255 0.05436 7.6594 1.3381 2.3338 1.2838 4.1743 3.3075 5.2312 5.7525 1.057 2.4449 1.2705 5.172 0.6069 7.7517-0.6637 2.5796-2.1668 4.8651-4.2725 6.4964-2.1056 1.6313-4.6942 2.5156-7.3579 2.5137v-0.0569zm-5.5901-3.222c0.15176-0.0012 0.3011 0.0381 0.43263 0.1138 1.9528 1.1274 4.223 1.5793 6.4586 1.2854 2.2357-0.2938 4.312-1.3169 5.9071-2.9106 1.5951-1.5938 2.62-3.6692 2.9158-5.9046 0.2958-2.2353-0.1541-4.5059-1.2798-6.4596-1.1257-1.9538-2.8645-3.4816-4.9468-4.3468-2.0822-0.86518-4.3918-1.0194-6.5706-0.4386-2.1788 0.58074-4.1052 1.864-5.4806 3.6508s-2.123 3.9774-2.127 6.2323c-0.00962 2.0653 0.61424 4.0839 1.7875 5.7837 0.06754 0.103 0.11346 0.2187 0.13499 0.3401 0.02153 0.1213 0.01821 0.2457-0.00975 0.3657l-0.62619 2.4137 3.4156-0.1252h-0.01138z" fill="#FF375F" stroke="#FF375F" stroke-width=".5"/><path d="m8.8519 17.777c-0.09331 0.016-0.18873 0.016-0.28205 0-0.10886-0.0381-0.20876-0.0975-0.2937-0.1747-0.08495-0.0771-0.15318-0.1703-0.2006-0.274s-0.07305-0.2158-0.07535-0.3295 0.01877-0.2267 0.06196-0.3322l2.9898-8.106c0.0387-0.10714 0.0991-0.20547 0.1774-0.28907 0.0784-0.0836 0.1731-0.15076 0.2785-0.19743 0.1053-0.04667 0.2192-0.0719 0.3348-0.07416 0.1155-0.00227 0.2303 0.01848 0.3375 0.06098 0.1098 0.03654 0.2107 0.09521 0.2963 0.17226 0.0855 0.07705 0.1538 0.17079 0.2005 0.27526 0.0467 0.10446 0.0708 0.21736 0.0707 0.33149 0 0.11413-0.0243 0.22699-0.0711 0.3314l-2.9898 8.1059c-0.07091 0.1571-0.18885 0.2891-0.33804 0.3784s-0.32253 0.1316-0.49683 0.1213zm4.2984 0.211c-0.0971 0.0157-0.1962 0.0157-0.2933 0-0.1098-0.0368-0.2108-0.0954-0.2967-0.1723-0.0858-0.0768-0.1547-0.1702-0.2023-0.2743-0.0476-0.1042-0.0729-0.2168-0.0744-0.331s0.0208-0.2275 0.0657-0.3328l3.001-8.0949c0.0355-0.10574 0.0921-0.20341 0.1666-0.28723s0.1653-0.15209 0.267-0.20077c0.1018-0.04868 0.2124-0.07678 0.3254-0.08265 0.1129-0.00587 0.226 0.01062 0.3324 0.0485 0.1063 0.03787 0.2039 0.09636 0.287 0.172 0.083 0.07564 0.1497 0.1669 0.1963 0.26838s0.072 0.21112 0.0747 0.32243c0.0028 0.11132-0.0171 0.22205-0.0586 0.32564l-3.001 8.106c-0.0616 0.157-0.17 0.2919-0.3109 0.387-0.141 0.0952-0.3079 0.1461-0.4789 0.146z" fill="#FF375F" stroke="#FF375F" stroke-width=".5"/><path d="m17.172 11.719h-8.747c-0.18725-0.0403-0.35559-0.1478-0.47651-0.3045s-0.18697-0.3528-0.18697-0.5552c0-0.2023 0.06605-0.3984 0.18697-0.5551s0.28926-0.2642 0.47651-0.3045h8.747c0.2197 0 0.4304 0.0924 0.5857 0.2569s0.2426 0.3876 0.2426 0.6203c0 0.2326-0.0873 0.4558-0.2426 0.6203s-0.366 0.2569-0.5857 0.2569v-0.0351zm-0.5743 4.2807h-8.7691c-0.21968 0-0.43036-0.0924-0.5857-0.2569s-0.24261-0.3876-0.24261-0.6203c0-0.2326 0.08727-0.4558 0.24261-0.6203s0.36602-0.2569 0.5857-0.2569h8.7691c0.2197 0 0.4304 0.0924 0.5857 0.2569s0.2426 0.3877 0.2426 0.6203c0 0.2327-0.0873 0.4558-0.2426 0.6203s-0.366 0.2569-0.5857 0.2569z" fill="#FF375F" stroke="#FF375F" stroke-width=".5"/></svg><p>话题</p></a>
                
                    <a href="/archives/" class="dropdown-menu link-button"><svg viewBox="0 0 20 19" xmlns="http://www.w3.org/2000/svg"><path d="m3.25 5.5609h13.5c0.3891 0 0.7031-0.31406 0.7031-0.70312 0-0.38907-0.314-0.70313-0.7031-0.70313h-13.5c-0.38906 0-0.70312 0.31406-0.70312 0.70313 0 0.38672 0.3164 0.70312 0.70312 0.70312zm1.5492-3.3797h10.402c0.389 0 0.7031-0.31406 0.7031-0.70312s-0.3141-0.70313-0.7031-0.70313h-10.402c-0.38906 0-0.70313 0.31407-0.70313 0.70313s0.31407 0.70312 0.70313 0.70312zm7.957 10.207h-5.5124c-0.38906 0-0.70313 0.314-0.70313 0.7031s0.31407 0.7031 0.70313 0.7031h5.5124c0.3891 0 0.7032-0.314 0.7032-0.7031s-0.3141-0.7031-0.7032-0.7031z" fill="#FF9F0A" stroke="#FF9F0A" stroke-width=".5"/><path d="m17.929 7.4664h-15.858c-0.77344 0-1.4062 0.63281-1.4062 1.4062v8.4376c0 0.7734 0.63281 1.4062 1.4062 1.4062h15.858c0.7734 0 1.4063-0.6328 1.4063-1.4062v-8.4376c0-0.77344-0.6329-1.4062-1.4063-1.4062zm-0.0023 9.8391-0.0024 0.0023h-15.848l-0.00235-0.0023v-8.4305l0.00235-0.00234h15.848l0.0024 0.00234v8.4305z" fill="#FF9F0A" stroke="#FF9F0A" stroke-width=".5"/></svg><p>历史文章</p></a>
                
                    <a href="/friends/" class="dropdown-menu link-button"><svg viewBox="0 0 29 26" xmlns="http://www.w3.org/2000/svg"><path d="m23.724 16.024c-0.2141 0-0.4282-0.0823-0.5929-0.247-0.0783-0.0777-0.1404-0.17-0.1828-0.2718-0.0424-0.1017-0.0642-0.2109-0.0642-0.3211 0-0.1103 0.0218-0.2194 0.0642-0.3212s0.1045-0.1941 0.1828-0.2718l2.9975-2.9975c0.6753-0.6752 0.1483-1.4987-0.4282-2.0752l-6.1762-6.1762c-0.4941-0.4941-0.8399-0.62586-1.0376-0.6588-0.1482-0.01647-0.3623-0.01647-0.6588 0.27999l-5.9785 5.9786c0.8729 0.55998 1.8611 0.62586 2.4869 0.08235 1.0706-0.93878 2.6023-2.6022 2.6187-2.6187 0.3129-0.34586 0.84-0.36234 1.1859-0.04941 0.3458 0.31293 0.3623 0.83997 0.0494 1.1858-0.0659 0.06588-1.6141 1.7458-2.7505 2.7505-1.4823 1.3011-3.821 0.9882-5.4515-0.72467-0.31293-0.3294-0.31293-0.85644 0.01643-1.1694l6.6209-6.6209c1.1529-1.1529 2.6846-1.0211 4.0846 0.37881l6.1762 6.1762c1.4987 1.4988 1.6634 3.2116 0.4282 4.4469l-2.9975 2.9975c-0.1647 0.1647-0.3789 0.247-0.593 0.247z" fill="#0A84FF" stroke="#0A84FF" stroke-width=".5"/><path d="m14.583 25c-0.1153 0-0.2471 0-0.3624-0.0165-0.7246-0.0988-1.4164-0.4446-1.9599-0.9882l-6.7032-6.7197c-1.12-1.1199-1.647-2.0093-2.1246-2.7834-0.27999-0.4611-0.54351-0.9058-0.90585-1.367-0.09881-0.1317-0.2141-0.2635-0.32939-0.3952-0.69174-0.84-1.12-1.3835-1.1529-1.9435 0-0.0329 0-0.0659-0.01647-0.0988-0.049413-0.4941-0.1647-1.5317 1.0211-2.7175l5.3527-5.3527c1.2023-1.2023 2.6187-0.51057 3.5575-0.03294l0.1482 0.06588c0.1483 0.06588 0.313 0.14823 0.4612 0.23058 0.9388 0.46115 2.1246 1.0211 3.1457 1.9105 0.3459 0.29646 0.3953 0.83996 0.0824 1.1858-0.2965 0.34587-0.84 0.39528-1.1858 0.08235-0.8565-0.74114-1.927-1.2517-2.7835-1.6635-0.1646-0.08235-0.3293-0.16469-0.494-0.23057l-0.1483-0.08235c-1.054-0.52704-1.334-0.57645-1.6305-0.27999l-5.3198 5.3527c-0.62586 0.62585-0.57645 0.9882-0.54351 1.3505 0 0.033 0 0.0494 0.01647 0.0824 0.08235 0.2141 0.54351 0.7576 0.79056 1.054 0.11529 0.1483 0.24705 0.2965 0.34586 0.4283 0.44469 0.5599 0.74115 1.054 1.0376 1.5481 0.46115 0.7741 0.88937 1.4988 1.8611 2.4705l6.7033 6.7032c0.2799 0.28 0.6423 0.4612 0.9882 0.5106 0.247 0.033 0.4611-0.0165 0.5764-0.1153 0.3294-0.3294 2.0093-1.8117 4.348-3.8704 1.3176-1.1529 2.7999-2.454 2.9481-2.6187 0.0165-0.0165 0.873-1.12 0.0824-1.9105l-6.1927-6.1927c-0.3294-0.3294-0.3294-0.85643 0-1.1858s0.8565-0.3294 1.1859 0l6.1926 6.1927c0.6918 0.6917 0.9553 1.614 0.7576 2.5857-0.1482 0.7247-0.527 1.3835-0.8399 1.6964-0.1812 0.1812-1.2188 1.087-3.0305 2.6846-1.7623 1.5482-3.9527 3.4752-4.2657 3.7881-0.3952 0.4117-0.9717 0.6423-1.614 0.6423z" fill="#0A84FF" stroke="#0A84FF" stroke-width=".5"/><path d="m21.566 18.643c-0.2141 0-0.4282-0.0823-0.5929-0.247l-3.014-3.014c-0.3294-0.3294-0.3294-0.8564 0-1.1858s0.8564-0.3294 1.1858 0l3.014 3.0139c0.0783 0.0777 0.1404 0.17 0.1828 0.2718s0.0643 0.2109 0.0643 0.3212c0 0.1102-0.0219 0.2194-0.0643 0.3211-0.0424 0.1018-0.1045 0.1942-0.1828 0.2718-0.1482 0.1647-0.3623 0.247-0.5929 0.247zm-2.1081 2.1246c-0.2141 0-0.4283-0.0823-0.593-0.247l-3.0139-3.014c-0.3294-0.3294-0.3294-0.8564 0-1.1858s0.8564-0.3294 1.1858 0l3.014 3.014c0.0783 0.0776 0.1404 0.1699 0.1828 0.2717s0.0642 0.2109 0.0642 0.3212c0 0.1102-0.0218 0.2194-0.0642 0.3211-0.0424 0.1018-0.1045 0.1942-0.1828 0.2718-0.1647 0.1647-0.3788 0.247-0.5929 0.247zm-2.2894 2.2894c-0.2141 0-0.4282-0.0824-0.5929-0.2471l-3.014-3.014c-0.3294-0.3294-0.3294-0.8564 0-1.1858s0.8565-0.3294 1.1859 0l3.014 3.014c0.0782 0.0776 0.1404 0.17 0.1828 0.2717 0.0424 0.1018 0.0642 0.2109 0.0642 0.3212 0 0.1102-0.0218 0.2194-0.0642 0.3212-0.0424 0.1017-0.1046 0.1941-0.1828 0.2717-0.1647 0.1647-0.3788 0.2471-0.593 0.2471z" fill="#0A84FF" stroke="#0A84FF" stroke-width=".5"/></svg><p>我的朋友们</p></a>
                
                    <a href="/about/" class="dropdown-menu link-button"><svg width="26" height="23" viewBox="0 0 26 23" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18.6853 21.7135C18.4357 21.2996 18.5428 20.7631 18.9347 20.4805C21.7969 18.4177 23.3817 15.0547 23.097 11.4371C22.7227 6.67672 18.9394 2.75422 14.1954 2.20789C8.07773 1.50336 2.87016 6.2893 2.87016 12.2687C2.87016 14.1791 3.39305 16.0084 4.38914 17.6084C4.64367 18.0174 4.53773 18.5527 4.15125 18.8403C3.7125 19.1668 3.08414 19.0505 2.79539 18.586C1.54031 16.5676 0.921093 14.2419 1.00805 11.821C1.21781 5.98719 5.71125 1.06297 11.5064 0.359611C18.7875 -0.524218 25.0001 5.16031 25.0001 12.2687C25.0001 16.1736 23.1607 19.7401 20.032 21.9948C19.59 22.3133 18.9668 22.1802 18.6853 21.7135Z" fill="#FF453A" stroke="#FF453A" stroke-width="0.5"/><path d="M8.91445 11.4383C8.38406 11.4383 7.95422 11.0084 7.95422 10.478V9.48968C7.95422 8.95929 8.38406 8.52945 8.91445 8.52945C9.44484 8.52945 9.87468 8.95929 9.87468 9.48968V10.478C9.87468 11.0084 9.44461 11.4383 8.91445 11.4383ZM12.7177 11.4383C12.1873 11.4383 11.7574 11.0084 11.7574 10.478V9.48968C11.7574 8.95929 12.1873 8.52945 12.7177 8.52945C13.248 8.52945 13.6779 8.95929 13.6779 9.48968V10.478C13.6781 11.0084 13.248 11.4383 12.7177 11.4383ZM10.7639 15.8349C10.2019 15.8349 9.46312 15.5506 8.86664 15.2314C8.39156 14.9771 8.29711 14.3373 8.6782 13.9562C8.92945 13.7049 9.31593 13.647 9.62718 13.8184C9.98343 14.0143 10.4555 14.232 10.7932 14.232C11.2083 14.232 11.6067 14.1226 11.9555 13.9175C12.2639 13.7361 12.657 13.7968 12.9098 14.0497L12.9513 14.0912C13.3139 14.4537 13.257 15.0737 12.8166 15.3366C12.2112 15.6983 11.4877 15.8349 10.7639 15.8349Z" fill="#FF453A" stroke="#FF453A" stroke-width="0.5"/></svg><p>关于我</p></a>
                
            </div>
        
    </div>
</header>
</div>

            <main class="main">
    

<div class="post-title">
    <div class="post-title__text">
        基于腾讯云，给你的 Icarus 博客配上 Twikoo 评论系统
    </div>
    <div class="post-title__meta">
        <a href="/archives/2020/12/" class="post-meta__date link-button">2020 年 12 月 30 日</a>
        
    <!-- <span class="separate-dot"></span> -->
    <a href="/categories/%E6%8A%80%E6%9C%AF/" class="link-button">技术</a>

 
        
    
     
    <span id="busuanzi_container_page_pv" hidden>
        <span class="separate-dot"></span>
        <span></span>
        <span id="busuanzi_value_page_pv"></span>
        <span>Views</span>
    </span>



 

 
    </div>
</div>



<div class="post__header">
    
        <div class="post-cover lazy" data-bg="https://static.anzifan.com/uPic/twikoo_Cover_light_1.png"></div>
    

<!-- theme.meta.thumbnail.default -->
    <div class="post__expire" id="post-expired-notify">
        <p>
            本文最后更新于 &lt;span id=&#34;expire-date&#34;&gt;&lt;/span&gt; 天前，文中部分描述可能已经过时。
        </p>
    </div>
    <script>
        (() => {
            var update = Date.parse("2021-02-11"),
                date = new Date(),
                now = date.getTime(),
                expire = now - update,
                expire_days = Math.floor(expire/(24*3600*1000));
            if (expire_days >= 180) {
                document.querySelectorAll('#expire-date')[0].innerHTML = expire_days;
                document.querySelectorAll('#post-expired-notify')[0].style.display = 'block';
            }
        })();
    </script>
</div>
<article class="post content-card">
    <div class="post__content">
        <p><article class="message message-immersive is-info">
  <div class="message-body">
    <i class="fas fa-info-circle"></i>
    本文已被 Twikoo <a target="_blank" rel="noopener" href="https://twikoo.js.org/quick-start.html#在-hexo-icarus-主题使用">官方文档</a>收录👌
  </div>
</article><p>
<blockquote>
<p>拖更是不好的。<a class="quote_src" href="https://anzifan.com">异次元de机智君</a></p>
</blockquote>
<article class="message is-info candy-series">   <div class="message-header candy-series-header">  <i class="fas fa-info-circle mr-2"></i>   <p>📚本系列文章，将分成四个板块更新</p>  </div>   <div class="message-body"> 
<ol><li><a href="/post/icarus_to_candy_1/"><strong>基础设计修改</strong></a>
  <span class="icon has-text-success">
  <i class="fas fa-check-square"></i>
</span></li>
<li><a href="/post/icarus_to_candy_2/"><strong>配置 Twikoo 评论</strong></a>
  <span class="icon has-text-success">
  <i class="fas fa-check-square"></i>
</span></li></li>
<li>增加深色模式支持</li>
<li>其他细节与模块</li>
</ol></d/iv> </article>
<style>.candy-series-header {
  justify-content: start !important;
}
  .message.is-info.candy-series{
    width: 50%;
float: right;
margin-left: 20px;
    margin-bottom: 11px !important;
  }
  @media screen and (max-width: 768px){
    .message.is-info.candy-series{
    width: 100%;
float: none;
margin-left: 0;
  }
  }
</style>
<p>太长的文章也是不好的，比如我之前有一篇 Windows 软件推荐文，因为内容太多，已经写了一个多月了，现在看到它就有些恶心（不过肯定会完成的）。所以这篇我会尝试加快脚步去介绍，毕竟 Twikoo 的中文文档目前也比较详细了，其实没什么可写的了，大佬们可以自己<a target="_blank" rel="noopener" href="https://twikoo.js.org">参考</a>。</p>
<p>闲话少说，这篇是 Candy 主题系列的第二篇，每个博客都需要的、<s>食之无味弃之可惜的</s>评论系统。当然 Candy 主题基于 Icarus 主题，所以对 <strong>Icarus 主题来说也是完全适用的</strong>。</p>
<h2 id="为什么选择-Twikoo？">为什么选择 Twikoo？</h2>
<p>其实 <a target="_blank" rel="noopener" href="https://www.imaegoo.com">iMaeGoo</a> 大佬在官方文档就把理由说的非常清楚了：</p>
<blockquote>
<p>一个<strong>简洁、安全、免费</strong>的静态网站评论系统，基于腾讯云开发。</p>
</blockquote>
<p>「简洁」、「安全」、「免费」、基于国内的云服务，对于一个主体语言是中文的博客来说，还需要更多理由吗？目前的评论系统现状是：「简洁」的，不够安全；「安全」的不一定免费；「免费」的不一定在国内网络环境能很好的访问。</p>
<h2 id="Twikoo-的特性">Twikoo 的特性</h2>
<p>作为一款「纯国产」的评论系统，Twikoo 很多特性对于国内博主真的很方便：</p>
<ol>
<li>采用免费的腾讯云开发，免去二次备案的时间成本；</li>
<li>通过云函数控制敏感信息，防止泄漏；</li>
<li>微信、QQ、邮件…… 多种提醒方式可选；</li>
<li>基于 Akismet 的反垃圾支持；</li>
<li>方便好用的评论管理系统和配置台，直接在博客评论区管理评论和配置其他信息；</li>
<li>博主标示、User Agent 显示、点赞系统、多级评论、支持图片、markdown、Katex 公式……；</li>
<li>活跃、友善的开发者和社区；</li>
</ol>
<p>除此之外，你还需要明白 Twikoo 是个正在成长中的评论系统，且更新频繁，你可以在这里浏览<a target="_blank" rel="noopener" href="https://github.com/imaegoo/twikoo/projects/1">开发计划</a>。另外，它已被腾讯云官方选为云开发优秀应用。</p>
<h2 id="让我们开始吧！">让我们开始吧！</h2>
<p>搭建 Twikoo 分两步：</p>
<ol>
<li>在本地的博客主题中配置 Twikoo；</li>
<li>在腾讯云配置环境和云函数；</li>
</ol>
<p>在此感谢作者 <a target="_blank" rel="noopener" href="https://www.imaegoo.com">iMaeGoo</a> ，本教程基于它的<a target="_blank" rel="noopener" href="https://github.com/imaegoo/hexo-theme-icarus">魔改版 Icarus</a>，且适用于 Icarus 4.1.1。</p>
<h3 id="在本地的博客主题中配置-Twikoo">在本地的博客主题中配置 Twikoo</h3>
<p><strong>第一步：</strong></p>
<p>在主题目录下 <code>layout/comment</code> 中创建 <code>twikoo.jsx</code> 并键入：</p>
<pre><div class="caption"><span>twikoo.jsx</span></div><code class="hljs jsx"><span class="hljs-keyword">const</span> &#123; Component, Fragment &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;inferno&#x27;</span>);
<span class="hljs-keyword">const</span> &#123; cacheComponent &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;hexo-component-inferno/lib/util/cache&#x27;</span>);

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Twikoo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;
  <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;
    <span class="hljs-keyword">const</span> &#123;
      envId,
      jsUrl,
    &#125; = <span class="hljs-built_in">this</span>.props;
    <span class="hljs-keyword">const</span> js = <span class="hljs-string">`twikoo.init(&#123;</span>
<span class="hljs-string">      envId: &#x27;<span class="hljs-subst">$&#123;envId&#125;</span>&#x27;</span>
<span class="hljs-string">    &#125;);`</span>;
    <span class="hljs-keyword">return</span> (
      &lt;Fragment&gt;
        &lt;div id=<span class="hljs-string">&quot;twikoo&quot;</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;content twikoo&quot;</span>&gt;&lt;/div&gt;
        &lt;script src=&#123;jsUrl&#125;&gt;&lt;/script&gt;
        &lt;script dangerouslySetInnerHTML=&#123;&#123; <span class="hljs-attr">__html</span>: js &#125;&#125;&gt;&lt;/script&gt;
      &lt;/Fragment&gt;
    );
  &#125;
&#125;

Twikoo.Cacheable = cacheComponent(Twikoo, <span class="hljs-string">&#x27;comment.twikoo&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> &#123;
  <span class="hljs-keyword">const</span> &#123; comment &#125; = props;
  <span class="hljs-keyword">return</span> &#123;
    envId: comment.envId,
    jsUrl: <span class="hljs-string">&#x27;https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js&#x27;</span>,
  &#125;;
&#125;);

<span class="hljs-built_in">module</span>.exports = Twikoo;</code></pre>
<p><strong>第二步：</strong></p>
<p>在 <code>include/shema/comment</code> 中创建 <code>twikoo.json</code> ，并键入：</p>
<pre><div class="caption"><span>twikoo.json</span></div><code class="hljs json">&#123;
  <span class="hljs-attr">&quot;$schema&quot;</span>: <span class="hljs-string">&quot;http://json-schema.org/draft-07/schema#&quot;</span>,
  <span class="hljs-attr">&quot;$id&quot;</span>: <span class="hljs-string">&quot;/comment/twikoo.json&quot;</span>,
  <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;Twikoo comment plugin configurations&quot;</span>,
  <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;object&quot;</span>,
  <span class="hljs-attr">&quot;properties&quot;</span>: &#123;
    <span class="hljs-attr">&quot;type&quot;</span>: &#123;
      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;string&quot;</span>,
      <span class="hljs-attr">&quot;const&quot;</span>: <span class="hljs-string">&quot;twikoo&quot;</span>
    &#125;,
    <span class="hljs-attr">&quot;envId&quot;</span>: &#123;
      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;string&quot;</span>,
      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;envId from Tencent CloudBase&quot;</span>
    &#125;
  &#125;,
  <span class="hljs-attr">&quot;required&quot;</span>: [<span class="hljs-string">&quot;type&quot;</span>, <span class="hljs-string">&quot;envId&quot;</span>]
&#125;</code></pre>
<p><strong>第三步：</strong></p>
<p>在 <code>include/schema/common/comment.json</code> 中添加 <code>twikoo.json</code> 的 <code>$ref</code>：</p>
<pre><div class="caption"><span>comment.json</span></div><code class="hljs diff">        &#125;,
         &#123;
             &quot;$ref&quot;: &quot;/comment/valine.json&quot;
<span class="hljs-addition">+        &#125;,</span>
<span class="hljs-addition">+        &#123;</span>
<span class="hljs-addition">+            &quot;$ref&quot;: &quot;/comment/twikoo.json&quot;</span>
         &#125;
     ]
 &#125;</code></pre>
<p><strong>第四步：</strong></p>
<p>现在你只需要在 <code>_config.yml</code> 文件中  <code>comment</code> 部分添加 Twikoo 即可，在 envId 后面请填写你自己的腾讯云环境 ID，这个 ID 你会在下一个板块了解如何获取，现在可以空着：</p>
<pre><code class="hljs yml"><span class="hljs-attr">comment:</span>
	<span class="hljs-attr">type:</span> <span class="hljs-string">twikoo</span>
	<span class="hljs-attr">envId:</span> <span class="hljs-string">xxxxxxxxxxxxxxx</span> <span class="hljs-comment"># 腾讯云环境id</span>
	<span class="hljs-attr">jsUrl:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/twikoo@0.4.5/dist/twikoo.all.min.js</span></code></pre>
<p>这里需要注意的是最后的 <code>jsUrl</code> ，你会发现 twikoo 后面有 @ 版本号。保险起见，目前 twikoo 是需要你手动去更新这个版本号的。如果你不加版本号，这意味着每次都请求最新版本，你可能就必须得及时更新后台云函数了。</p>
<p>感谢评论区提醒👇：</p>
<blockquote>
<p><code>jsUrl</code>中的版本号应该与云函数版本号保持一致<a class="quote_src" href="/post/icarus_to_candy_2/#21ded5cb5ff2db4903ab9cc23c8c4c20">Higurashi-kagome</a></p>
</blockquote>
<p>同样，<a target="_blank" rel="noopener" href="https://twikoo.js.org/faq.html#%E5%A6%82%E4%BD%95%E6%9B%B4%E6%96%B0-twikoo-%E7%89%88%E6%9C%AC">更新版本</a>也很简单，后台更新云函数后，改版本号即可。（这里有个坑，建议每次更新版本先删除 <code>node_modules</code> 再点击保存并安装依赖）</p>
<p><strong>第五步（可选）：</strong></p>
<p>给博客换上 Twikoo 访客计数。在 <code>layout/common/article.jsx</code> 中修改 <code>&#123;/* Visitor counter */&#125;</code> 部分：</p>
<pre><div class="caption"><span>article.jsx</span></div><code class="hljs diff"><span class="hljs-addition">+ &#123;!index ? &lt;span id=&#123;url_for(page.link || page.path)&#125; class=&quot;level-item twikoo_visitors&quot; data-flag-title=&#123;page.title&#125; dangerouslySetInnerHTML=&#123;&#123;</span>
<span class="hljs-deletion">-	&#123;!index &amp;&amp; plugins &amp;&amp; plugins.busuanzi === true ? &lt;span class=&quot;level-item&quot; id=&quot;busuanzi_container_page_pv&quot; dangerouslySetInnerHTML=&#123;&#123; __html: _p(&#x27;plugin.visit_count&#x27;, &#x27;&lt;span id=&quot;busuanzi_value_page_pv&quot;&gt;0&lt;/span&gt;&#x27;)</span>
<span class="hljs-addition">+	__html: &#x27;&lt;i class=&quot;far fa-eye&quot;&gt;&lt;/i&gt;&#x27; + _p(&#x27;plugin.visit_count&#x27;, &#x27;&amp;nbsp;&amp;nbsp;&lt;span id=&quot;twikoo_visitors&quot;&gt;&lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt;&lt;/span&gt;&#x27;)</span>
&#125;&#125;&gt;&lt;/span&gt; : null&#125;</code></pre>
<p>本地需要修改的部分完成✅</p>
<h3 id="在腾讯云配置环境和云函数">在腾讯云配置环境和云函数</h3>
<h3 id="云环境初始化">云环境初始化</h3>
<p>我们先来初始化腾讯云环境，使用云开发作为评论后台，每个云开发用户均长期享受 1 个免费的标准型基础版 1 资源套餐，换句话说对于大部分博主来说是免费的。</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://curl.qcloud.com/KnnJtUom">注册云开发CloudBase</a></li>
<li>进入<a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/tcb/">云开发控制台</a>，新建环境，请按需配置环境：
<ul>
<li>环境名称自由填写</li>
<li>推荐选择计费方式<code>包年包月</code>，套餐版本<code>基础班 1</code>，超出免费额度不会收费</li>
<li>如果提示选择“应用模板”，请选择“空模板”</li>
</ul>
</li>
<li>进入<a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/tcb/env/login">环境-登录授权</a>，启用“匿名登录”；</li>
<li>进入<a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/tcb/env/safety">环境-安全配置</a>，将网站域名添加到“WEB安全域名”；</li>
<li>复制环境 ID，在上一板块中的第四步填写。</li>
</ol>
<h3 id="配置云函数">配置云函数</h3>
<p>接下来配置云函数。恭喜你赶上了 Twikoo 的好时代，目前支持的配置方式很多，且更简单，不需要再去踩脚本安装的坑了。</p>
<p>不是我偷懒，这部分官方文档其实说的非常完善且精简了，大家可以直接阅读官方文档的<a target="_blank" rel="noopener" href="https://twikoo.js.org/quick-start.html#%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8">手把手教程</a>，我这里就引用一下吧：</p>
<blockquote>
<ol>
<li>进入<a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/tcb/scf/index">环境-云函数</a>，点击“新建云函数”</li>
<li>函数名称请填写：<code>twikoo</code>，创建方式请选择：<code>空白函数</code>，运行环境请选择：<code>Nodejs 10.15</code>，函数内存请选择：<code>128MB</code>，点击“下一步”</li>
<li>打开 <a target="_blank" rel="noopener" href="https://imaegoo.coding.net/public/twikoo/twikoo/git/files/dev/src/function/twikoo/index.js">index.js</a>，全选代码、复制、粘贴到“函数代码”输入框中，点击“确定”</li>
<li>创建完成后，点击“twikoo&quot;进入云函数详情页，进入“函数代码”标签，点击“文件 - 新建文件”，输入 <code>package.json</code>，回车</li>
<li>打开 <a target="_blank" rel="noopener" href="https://imaegoo.coding.net/public/twikoo/twikoo/git/files/dev/src/function/twikoo/package.json">package.json</a>，全选代码、复制、粘贴到代码框中，点击“保存并安装依赖”</li>
</ol>
</blockquote>
<p>在这里只有一个建议，尽量采用「① 网页方式」，不要用脚本方式！不要用脚本方式！不要用脚本方式！尤其是在 macOS 下，「授权云开发环境」这步会有些 bug。</p>
<hr>
<p>成功了🎉！你给自己的 Icarus 博客换上了崭崭新的 Twkoo 评论，接下来看看如何管理和配置。</p>
<h2 id="配置、管理你的-Twikoo-评论系统">配置、管理你的 Twikoo 评论系统</h2>
<p>我们来开启管理面板：</p>
<ol>
<li>进入<a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/tcb/env/login">环境-登录授权</a>，点击“自定义登录”右边的“私钥下载”，下载私钥文件</li>
<li>用文本编辑器打开私钥文件，复制全部内容</li>
<li>你只需要来到最下面的评论区，点击小齿轮 <i class="fas fa-cog"></i> 即可配置更多设置，当然博主是需要登录的，初次进入需要粘贴私钥文件内容，并设置管理员密码。</li>
</ol>
<p>至于，通知提醒一类的功能，在控制面板中也有相应的引导，我就不在这里废话了。有什么问题欢迎和我交流或查看<a target="_blank" rel="noopener" href="https://twikoo.js.org/faq.html">官方解答</a>。</p>
<p>就这样，结束～</p>
<style>.content {text-align: left !important;}</style>
<a class="tag is-medium" href="mailto:541297173@qq.com?subject=「创造 CANDY 主题，只为更好的交互」一文的封面图授权申请" target="_blank">
<span class="icon" style="word-wrap: break-word;"><i class="fas fa-palette"></i></span>原创封面图，使用需<b>授权</b>，请勿盗用 </a>
    </div>
    
<div class="post__license">
    <div class="license_title">
        <p>
            基于腾讯云，给你的 Icarus 博客配上 Twikoo 评论系统
        </p>
        <p>
            <a href="https://anzifan.com/post/icarus_to_candy_2/">https://anzifan.com/post/icarus_to_candy_2/</a>
        </p>
    </div>
    <div class="license-meta level is-mobile">
        <div class="level-left">
            <div class="level-item is-narrow">
                <div>
                    <h6>作者</h6>
                    <p>异次元de机智君 </p>
                </div>
            </div>
            <div class="level-item is-narrow">
                <div>
                    <h6>发布于</h6>
                    <p>2020 年 12 月 30 日</p>
                </div>
            </div>
            <div class="level-item is-narrow">
                <div>
                    <h6>更新于</h6>
                    <p>2021 年 02 月 11 日</p>
                </div>
            </div>
            <div class="level-item is-narrow">
                <div>
                    <h6>许可协议</h6>
                    <p><a class="icon" rel="noopener" target="_blank" title="Creative Commons"
                            href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a
                            class="icon" rel="noopener" target="_blank" title="Attribution"
                            href="https://creativecommons.org/licenses/by/4.0/"><i
                                class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener"
                            target="_blank" title="Noncommercial"
                            href="https://creativecommons.org/licenses/by-nc/4.0/"><i
                                class="fab fa-creative-commons-nc"></i></a></p>
                </div>
            </div>
        </div>
    </div>
    
</div>
 
    <div class="post-footer__meta"><p>更新于 2021 年 02 月 11 日</p></div> 
    <div class="post-meta__cats"><a href="/categories/%E6%8A%80%E6%9C%AF/" class="post-cats__link link-button">技术</a><a href="/tags/Hexo/" class="post-tags__link link-button"># Hexo</a><a href="/tags/%E5%8D%9A%E5%AE%A2%E4%B8%BB%E9%A2%98/" class="post-tags__link link-button"># 博客主题</a><a href="/tags/%E5%89%8D%E7%AB%AF/" class="post-tags__link link-button"># 前端</a><a href="/tags/%E8%AF%84%E8%AE%BA/" class="post-tags__link link-button"># 评论</a></div> 
</article>


    <div class="nav">
        <div class="nav__prev">
            
                <a href="/post/ios_shortcuts_wallpaper/" class="nav__link">
                    <div class="nav__cover" style="background-image: url('https://cdn.sspai.com/2021/01/03/6f66128e87ae0e53e762bff7c44f92e3.png');"></div>
                    <div>
                        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M589.088 790.624L310.464 512l278.624-278.624 45.248 45.248L400.96 512l233.376 233.376z" fill="#808080"></path></svg>
                    </div>
                    <div>
                        <div class="nav__label">
                            Previous Post
                        </div>
                        <div class="nav__title">
                            一日一技｜在 iOS 中自定义自动切换的浅色/深色模式双壁纸
                        </div>
                    </div>
                </a>
            
        </div>
        <div class="nav__next">
            
                <a href="/post/macOS_control_center/" class="nav__link">
                    <div class="nav__cover" style="background-image: url('https://cdn.sspai.com/2020/12/29/e8413b09a7a6df2dd035fe64782f9e20.png?imageMogr2/auto-orient/quality/95/thumbnail/!1420x708r/gravity/Center/crop/1420x708/interlace/1');"></div>
                    <div>
                        <div class="nav__label">
                            Next Post
                        </div>
                        <div class="nav__title">
                            一日一技？「扩展」并重新认识 macOS 控制中心
                        </div>
                    </div>
                    <div>
                        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M434.944 790.624l-45.248-45.248L623.04 512l-233.376-233.376 45.248-45.248L713.568 512z" fill="#808080"></path></svg>
                    </div>
                </a>
            
        </div>
    </div>





</main>

            <footer class="footer">
    


    
    
    
        <span id="busuanzi_container_site_uv" hidden>
            <span></span>
            <span id="busuanzi_value_site_uv"></span>
            <span>Viewers</span>
            
        </span>
    
    
        <span id="busuanzi_container_site_pv" hidden>
            <span></span>
            <span id="busuanzi_value_site_pv"></span>
            <span>Views</span>
            
        </span>
    
 
 

 
    
        
        <p class="footer-copyright">
            Copyright © 2020&nbsp;-&nbsp;2021 <a href="/">安子璠的个人主页</a>
        </p>
    
    
    <p>Powered by <a href="https://hexo.io" target="_blank">Hexo</a> | Theme - <a href="https://github.com/ChrAlpha/hexo-theme-cards" target="_blank">Cards</a></p>
</footer>

        </div>
        
    <script defer src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.1.0/dist/lazyload.min.js"></script>
    <script>
        window.lazyLoadOptions = {
            elements_selector: ".lazy",
            threshold: 0
        };
    </script>
 

 
    <script>
        window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
        ga('create', 'UA-168668701-2', 'auto');
        ga('send', 'pageview');
    </script>
    <script async src="https://www.google-analytics.com/analytics.js"></script>
 

 

 
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement('script');
            hm.src = 'https://hm.baidu.com/hm.js?cba64d0811724e0e4763bd8a13059f1a';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
 

  



 


    
 


    
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>

    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.4.1/dist/jquery.fancybox.min.css">

    
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.4.1/dist/jquery.fancybox.min.js"></script>

    <script>
        let lazyloadT = Boolean('true'),
            auto_fancybox = Boolean('true')
        if (auto_fancybox) {
            $(".post__content").find('img').each(function () {
                var element = document.createElement("a");
                $(element).attr("data-fancybox", "gallery");
                $(element).attr("href", $(this).attr("src"));
                if (lazyloadT) {
                    $(element).attr("href", $(this).attr("data-srcset"));
                }
                $(this).wrap(element);
            });
        } else {
            $(".post__content").find("fancybox").find('img').each(function () {
                var element = document.createElement("a");
                $(element).attr("data-fancybox", "gallery");
                $(element).attr("href", $(this).attr("src"));
                if (lazyloadT) {
                    $(element).attr("href", $(this).attr("data-srcset"));
                }
                $(this).wrap(element);
            });
        }
    </script>
 

 

 

 




    </body>
</html>
